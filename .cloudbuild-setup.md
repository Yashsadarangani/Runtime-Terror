# Cloud Build Trigger Configuration
# This file documents the recommended trigger setup for the Runtime Terror project

# Trigger Name: runtime-terror-ci-cd
# Description: AI-powered test generation and coverage reporting pipeline

# Event Configuration:
#   Repository: github_Yashsadarangani_Runtime-Terror
#   Event: Push to any branch
#   Included files: 
#     - backend/**
#     - tools/**
#     - cloudbuild.yaml

# Substitutions:
#   _REPORT_DIR: backend/target/site/jacoco
#   _REPORTS_BUCKET_BASE: gs://runtime-terror-code/reports
#   _PROJECT_ID: runtime-terror-473009

# Required GCP Services:
#   - Cloud Build API
#   - Vertex AI API
#   - Cloud Storage

# Required IAM Permissions for Cloud Build service account:
#   - Vertex AI User (roles/aiplatform.user)
#   - Storage Object Admin (roles/storage.objectAdmin) for the reports bucket

# GCS Bucket Setup:
# gsutil mb gs://runtime-terror-code
# gsutil iam ch serviceAccount:$(gcloud projects describe runtime-terror-473009 --format="value(projectNumber)")@cloudbuild.gserviceaccount.com:roles/storage.objectAdmin gs://runtime-terror-code

# Manual trigger creation command:
# gcloud builds triggers create github \
#   --repo-name=Runtime-Terror \
#   --repo-owner=Yashsadarangani \
#   --branch-pattern=".*" \
#   --build-config=cloudbuild.yaml \
#   --name=runtime-terror-ci-cd \
#   --description="AI-powered test generation and coverage reporting pipeline"